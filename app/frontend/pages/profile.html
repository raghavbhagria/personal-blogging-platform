<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile | MyBlog</title>
    <link rel="stylesheet" href="../assets/css/profile.css">
    <script defer src="../js/profile.js"></script>
</head>
<body>

    <!-- ‚úÖ Navigation Bar -->
    <header>
        <div id="navbar-container"></div> <!-- Navbar will be loaded here -->
        <script>
            // Load the shared navbar dynamically
            fetch("navbar.html")
                .then(response => response.text())
                .then(html => {
                    document.getElementById("navbar-container").innerHTML = html;
                    updateNavbar(); // Ensure navbar updates based on login state
                });
        </script>
        <script defer src="../js/auth.js"></script> <!-- Ensure auth.js is loaded -->
    </header>

    <div class="profile-box">
        <h2>Your Profile</h2>
        <img id="profilePic" src="../assets/default-profile.png" alt="Profile Picture" class="profile-pic">
        <input type="file" id="profilePicInput" accept="image/*">
        <p><strong>Name:</strong> <span id="userName">Loading...</span></p>
        <p><strong>Email:</strong> <span id="userEmail">Loading...</span></p>
        <p><strong>Joined:</strong> <span id="userJoined">Loading...</span></p>
    
        <!-- ‚úÖ Update Profile Form -->
        <h3>Update Profile</h3>
        <form id="updateProfileForm">
            <input type="text" id="newName" placeholder="New Name">
            <input type="email" id="newEmail" placeholder="New Email">
            <input type="password" id="newPassword" placeholder="New Password (Leave blank to keep current)">
            <button type="submit">Update Profile</button>
        </form>
    
        <!-- ‚úÖ Buttons Section -->
        <div class="button-group">
            <button id="logoutBtn">üö™ Logout</button>
            <button id="deleteAccountBtn" class="delete">üóëÔ∏è Delete Account</button>
        </div>
    </div>

    <script>
        // Logout Functionality
        document.getElementById("logoutBtn").addEventListener("click", function () {
            localStorage.clear();
            alert("Logged out successfully.");
            window.location.href = "home.html";
        });
    </script>

</body>
</html>